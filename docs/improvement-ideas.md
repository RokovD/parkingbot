# Технический обзор и идеи улучшений

## Архитектура текущей версии
- `main.py` содержит всю логику бота: регистрацию, поиск, обновление и удаление данных, а также обработку сообщений.
- Используется глобальное подключение к SQLite (`parking_bot.db`), создаваемое при запуске.
- Временные состояния шагов регистрации и других сценариев хранятся в словарях `registration_data`, `update_data`, `departure_data`, `search_data` и `deletion_data`.
- Для распознавания номеров автомобилей применяется библиотека `pytesseract`, а изображение обрабатывается через Pillow.
- Интерфейс пользователя построен на ReplyKeyboardMarkup с русскоязычными кнопками.

## Рекомендации по развитию
1. **Структурировать код по модулям**  
   Вынести работу с базой данных, настройку клавиатур и обработчики в отдельные файлы. Это упростит поддержку и тестирование.
2. **Добавить FSM из aiogram**  
   Использование механизма состояний (Finite State Machine) сделает код регистрации и обновления данных чище и позволит хранить временные данные в контексте бота, а не в глобальных словарях.
3. **Перейти на асинхронную БД**  
   Рассмотреть `aiosqlite` или полноценную БД (PostgreSQL + SQLAlchemy), чтобы избежать блокировки цикла событий и подготовить проект к масштабированию.
4. **Обновить меню для зарегистрированных пользователей**  
   Вернуть кнопку «Обновить данные» или добавить отдельный сценарий изменения отдельных полей, чтобы пользователи могли поддерживать актуальность информации.
5. **Обработка нескольких результатов поиска**  
   Сейчас возвращается только первое совпадение. Можно отправлять список всех найденных контактов и улучшить обработку OCR (например, фильтровать по точности распознавания).
6. **Валидация и логирование**  
   Добавить более подробные сообщения об ошибках и централизованное логирование действий. Это поможет анализировать проблемы пользователей.
7. **Контейнеризация и деплой**  
   Создать Docker-файл и описать процесс развёртывания, чтобы упростить запуск в продакшене.
